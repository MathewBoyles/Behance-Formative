function numberFormat(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function breakLines(e){return e.replace(/(?:\r\n|\r|\n)/g,"<br />")}function loadTmpl(e){$.ajax({url:"/tmpl/"+e+".html",success:function(e){$("body").append(e)}})}function apiError(){$("#loading").hide(),$("#apiError").remove(),$el=$("<div />"),$el.attr("id","apiError").addClass("popup").addClass("popup-auto").append("<div />").find("div:last").addClass("popup-backdrop").parent().append("<div />").find("div:last").addClass("popup-container").addClass("row").append("<div />").find("div:last").addClass("popup-content").addClass("col-12").append("<div />").find("div:last").append("<h5 />").find("h5:last").text("Oops, something has gone wrong!").parent().append("<p />").find("p:last").html("It appears your connection to the Behance database has been lost. Please reload and try again."),$("body").append($el),$("#apiError").popup("show",{click:!1,keyboard:!1})}function matureFilter(e){$("#loading").hide(),$("#matureFilter").remove(),$el=$("<div />"),$el.attr("id","matureFilter").addClass("popup").addClass("popup-auto").append("<div />").find("div:last").addClass("popup-backdrop").parent().append("<div />").find("div:last").addClass("popup-container").addClass("row").append("<div />").find("div:last").addClass("popup-content").addClass("col-12").append("<div />").find("div:last").append("<h5 />").find("h5:last").text("Mature Content Blocked").parent().append("<p />").find("p:last").html("Sorry, this project contains mature content which may not be displayed here. However, you may view this project on <a href='"+e+"' target='_blank'>Behance <small><i class='fa fa-external-link' aria-hidden='true'></i></a></small>."),$("body").append($el),$("#matureFilter").popup()}function showItem(e){$("#loading").fadeIn(),isNaN(e)&&(e=$(this).data("projectData").id),$.ajax({url:"https://www.behance.net/v2/projects/"+e,data:{client_id:config.client_id},dataType:"jsonp",success:function(t){if(t.project.mature_content)return matureFilter(t.project.url),!1;var o=t.project;$.ajax({url:"https://www.behance.net/v2/projects/"+e+"/comments",data:{client_id:config.client_id,per_page:20,page:1},dataType:"jsonp",success:function(e){var t=document.title;document.title=o.name,pauseHash=!0,window.location.hash="view="+o.id,o.comments=e.comments;var a=$("#portfolioPopup").html();a=a.replace(/<!--b-->/g,"");var i=Template7.compile(a)(o);$("#portfolioPopupModal,#portfolioPopupStyle").remove(),$("body").append(i),$("#portfolioPopupModal").popup().bind("closed",function(){document.title=t,window.history.pushState({},document.title,window.location.href.split("#")[0]),$("#portfolioPopupModal").remove()}),$("#loading").hide()},error:apiError})},error:apiError})}function initMap(){$.getJSON("/js/markers.json",function(e){for(var t={center:new google.maps.LatLng(35,10),zoom:2,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,draggable:!1,styles:[{featureType:"all",elementType:"labels",stylers:[{color:"#ff0000"},{visibility:"off"}]},{featureType:"all",elementType:"labels.text",stylers:[{color:"#c4c4c4"},{visibility:"off"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#c4c4c4"},{visibility:"off"}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#c4c4c4"}]},{featureType:"administrative.country",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#c4c4c4"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{color:"#ff0000"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"},{color:"#c4c4c4"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#c4c4c4"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45},{color:"#c4c4c4"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"},{color:"#c4c4c4"}]},{featureType:"water",elementType:"all",stylers:[{color:"#ffffff"},{visibility:"on"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text",stylers:[{color:"#c4c4c4"}]}]},o=new google.maps.Map(document.getElementById("map"),t),a=new google.maps.InfoWindow,i=0;i<e.length;i++){var r=new google.maps.Marker({position:{lat:e[i].coords.lat,lng:e[i].coords.lng},map:o,icon:{url:"/img/marker.png"}});google.maps.event.addListener(r,"click",function(t,i){return function(){a.setContent("<div class='info-window-text'><h5><img class='inline-logo' src='img/marker.png' alt='Small logo' width='20'>"+e[i].country+"</h5><br>"+e[i].address+"<br>Phone: "+e[i].phone+"<br>Email: <a href='mailto:"+e[i].email+"'>"+e[i].email+"</a></div>"),a.open(o,t)}}(r,i)),google.maps.event.addListener(o,"click",function(){a.close()})}mapReady=!0,teamReady&&$("#loading").fadeOut()})}function drawChart(){$.ajax({url:"https://www.behance.net/v2/users/"+profileID+"/projects/",data:{client_id:config.client_id},dataType:"jsonp",success:function(e){for(var t=[],o={January:0,February:0,March:0,April:0,May:0,June:0,July:0,August:0,September:0,October:0,November:0,December:0},a=0;a<e.projects.length;a++)o[moment(1e3*e.projects[a].published_on).format("MMMM")]++;for(var i in o)t.push({Month:i,Count:o[i]});console.log(t);var r=new google.visualization.DataTable;r.addColumn("string","Month"),r.addColumn("number","Project Count");for(var n=0;n<t.length;n++)r.addRow([t[n].month,t[n].Count]);var l={title:"Number of Projects Posted by Month",width:"100%",height:"100%",legend:"none",vAxis:{title:"Project Count",minValue:10},hAxis:{title:"Month",showTextEvery:1,ticks:[{f:"Jan"},{f:"Feb"},{f:"Mar"},{f:"Apr"}]}};new google.visualization.LineChart(document.getElementById("history-chart")).draw(r,l)}})}for(var cookies={},cookiesTEMP=document.cookie.split(";"),i=0;i<cookiesTEMP.length;i++){var cookieTHIS=cookiesTEMP[i].split("=");cookies[cookieTHIS[0]]=cookieTHIS[1]}var config={user_id:"lightfarm",client_id:cookies.CLIENT_ID?cookies.CLIENT_ID:"8hRTUTjbwsJrLqGZ0kgxT48GBmkwwM5g"};loadTmpl("popup");var pauseHash=!1;$(window).on("hashchange",function(){pauseHash?pauseHash=!1:"#view="!=window.location.hash.substr(0,6)||isNaN(window.location.hash.substr(6))?$("#portfolioPopupModal").is(":visible")&&$("#portfolioPopupModal").popup("hide"):showItem(window.location.hash.substr(6))}).trigger("hashchange");var mapReady=!1;$.fn.popup=function(e,t){var o={backdrop:!0,click:!0,keyboard:!0},a=$.extend({},o,t);return"toggle"==e?(this.popup(this.is(":visible")?"hide":"show",t),this):(this.data({popupSettings:a}),this.find(".popup-backdrop").filter(function(){return!$(this).data("popupInit")}).data({popupInit:1}).click(function(){$(this).parent().data("popupSettings").click&&$(this).parent().popup("hide")}),"hide"==e?($("body").css("overflow","auto"),this.trigger("close"),this.find(".popup-container").animate({top:0-1.5*this.find(".popup-container").height()},500,function(){$(this).trigger("closed")}),this.find(".popup-backdrop").fadeOut(500,function(){$(this).parent().hide()})):"show"!=e&&e||($("body").css("overflow","hidden"),this.find(".popup-backdrop,.popup-container").hide(),this.show(),this.find(".popup-container").css({top:0-1.5*this.find(".popup-container").height()}).show().animate({top:"50%"},500,function(){$(this).trigger("opened")}),this.data("popupSettings").backdrop?this.find(".popup-backdrop").fadeIn(500):this.find(".popup-backdrop").css({opacity:0}).show()),this)},$(document).keyup(function(e){27==e.keyCode&&$(".popup:visible").length&&$(".popup:visible").filter(function(){return $(this).data("popupSettings").keyboard}).popup("hide")});var portfolio={categories:[],categoriesCount:{},user:config.user_id,page:0,maxFilters:4,grid:3,imgReady:function(){$(this).parent().find(".portfolio-load").fadeOut(500),$(this).parent().find(".portfolio-image-load").remove(),$(this).removeClass("portfolio-image-loading").attr("alt",$(this).attr("data-alt")).removeAttr("data-alt")},load:function(){if("mixitup-loadmore"==$(this).attr("id")){if($(this).find(".bouncer").is(":visible"))return!1;$(this).find("span").hide(),$(this).find(".bouncer").show()}portfolio.page++,$.ajax({url:"https://www.behance.net/v2/users/"+portfolio.user+"/projects",data:{client_id:config.client_id,per_page:12,page:portfolio.page},dataType:"jsonp",success:function(e){for(var t=0;t<e.projects.length;t++){for(var o=0;o<e.projects[t].fields.length;o++){var a=e.projects[t].fields[o];-1==portfolio.categories.indexOf(a)&&portfolio.categories.push(a),portfolio.categoriesCount[a]=portfolio.categoriesCount[a]?Number(portfolio.categoriesCount[a])+1:1}$el=$("<div />");for(var i=0;i<e.projects[t].fields.length;i++)$el.addClass("tag-"+e.projects[t].fields[i].replace(/ /g,"").replace(/[^\w\s]/gi,"").toLowerCase());$el.addClass("portfolio-item").addClass("col-md-"+portfolio.grid).data("projectData",e.projects[t]).append("<div />").find("div:last").addClass("portfolio-load").append("<div />").find("div:last").addClass("bouncer").append("<div />").find("div:last").addClass("bounce1").parent().append("<div />").find("div:last").addClass("bounce2").parent().append("<div />").find("div:last").addClass("bounce3").parent().parent().parent().append("<img />").find("img:last").addClass("portfolio-image").addClass("portfolio-image-loading").attr("src",e.projects[t].covers[404]).attr("data-alt",e.projects[t].name).on("load",portfolio.imgReady).parent().append("<img />").find("img:last").addClass("portfolio-image").addClass("portfolio-image-load").attr("src","/img/aRation.png").attr("alt",e.projects[t].name).parent().append("<div />").find("div:last").addClass("portfolio-title").text(e.projects[t].name).parent().click(showItem),$("#mixitup-container .row").append($el)}$("#mixitup-container .portfolio-item:not(.faded-done)").hide().addClass("faded-done").fadeIn(500);var r=Object.keys(portfolio.categoriesCount).sort(function(e,t){return portfolio.categoriesCount[e]-portfolio.categoriesCount[t]});r.reverse(),$("#mixitup-container .filters .btn:not(:eq(0))").remove();for(var n=0;n<r.length;n++)$el=$("<button />"),$el.addClass("btn").attr("type","button").attr("data-filter",".tag-"+r[n].replace(/ /g,"").replace(/[^\w\s]/gi,"").toLowerCase()).text(r[n]),n>portfolio.maxFilters-1&&$el.addClass("hide"),$("#mixitup-container .filters").append($el),n==r.length-1&&r.length>portfolio.maxFilters&&($("#mixitup-container .filters .btn.showmore, #mixitup-container .filters #mixitup-showless").remove(),$("#mixitup-container .filters").append("<button class='btn showmore btn-invert' type='button'>Show more...</button>"),$("#mixitup-container .filters").append("<a id='mixitup-showless' class='btn btn-invert'>Show less</a>"));$("#mixitup-loadmore").remove(),12==e.projects.length&&($el=$("<button />"),$el.addClass("btn").attr("id","mixitup-loadmore").click(portfolio.load).append("<span />").find("span:last").text("Load more...").parent().append("<div />").find("div:last").addClass("bouncer").hide().append("<div />").find("div:last").addClass("bounce1").parent().append("<div />").find("div:last").addClass("bounce2").parent().append("<div />").find("div:last").addClass("bounce3"),$("#mixitup-container").append($el)),$("#mixitup-container .filters .btn.showmore").click(function(){return $("#mixitup-container .filters").addClass("show"),!1}),$("#mixitup-showless").click(function(){return $("#mixitup-container .filters").removeClass("show"),!1}),$("#mixitup-container").data("mixInit")&&$("#mixitup-container").mixItUp("destroy"),$("#mixitup-container").data("mixInit",!0).mixItUp({selectors:{filter:"#mixitup-container .filters [data-filter]",target:".portfolio-item"},animation:{duration:300}}),$("#loading").fadeOut()},error:apiError})}};if("homepage"==$("body").attr("id")&&portfolio.load(),"profile"==$("body").attr("id")){var profileID=window.location.pathname.split("/")[2],profilePage=window.location.pathname.split("/")[3];portfolio.maxFilters=2,portfolio.grid=4,portfolio.user=profileID,$.ajax({url:"https://www.behance.net/v2/users/"+profileID,data:{client_id:config.client_id},dataType:"jsonp",success:function(e){document.title=e.user.display_name+" | "+document.title;var t=$("#profileData").html(),o=Template7.compile(t)(e.user);$("#profile-sidebar").html(o),$("#profile-sidebar > *").hide().fadeIn(500),"stats"==profilePage?($("#profile-stats").show(),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(drawChart),$("#mixitup-container").remove(),$("#loading").fadeOut()):portfolio.load()},error:apiError})}var teamReady=!1;"about"==$("body").attr("id")&&$.getJSON("/js/team.json",function(e){var t=$("#teamRows").html(),o=Template7.compile(t)({team:e});$("#teamRows").after(o),teamReady=!0,mapReady&&$("#loading").fadeOut()});