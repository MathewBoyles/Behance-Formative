function numberFormat(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function breakLines(e){return e.replace(/(?:\r\n|\r|\n)/g,"<br />")}function loadTmpl(e){$.ajax({url:"/tmpl/"+e+".html",success:function(e){$("body").append(e)}})}function apiError(){$("#loading").hide(),$("#apiError").remove(),$el=$("<div />"),$el.attr("id","apiError").addClass("popup").append("<div />").find("div:last").addClass("popup-backdrop").parent().append("<div />").find("div:last").addClass("popup-container").addClass("row").append("<div />").find("div:last").addClass("popup-content").addClass("col-12").append("<img />").find("img:last").attr("src","ERROR"),$("body").append($el),$("#apiError").popup("show",{click:!1,keyboard:!1})}function showItem(e){$("#loading").fadeIn(),isNaN(e)&&(e=$(this).data("projectData").id),$.ajax({url:"https://www.behance.net/v2/projects/"+e,data:{client_id:config.client_id},dataType:"jsonp",success:function(t){var o=t.project;$.ajax({url:"https://www.behance.net/v2/projects/"+e+"/comments",data:{client_id:config.client_id,per_page:20,page:1},dataType:"jsonp",success:function(e){var t=document.title;document.title=o.name,pauseHash=!0,window.location.hash="view="+o.id,o.comments=e.comments;var i=$("#portfolioPopup").html();i=i.replace(/<!--b-->/g,"");var a=Template7.compile(i)(o);$("#portfolioPopupModal").remove(),$("body").append(a),$("#portfolioPopupModal").popup().bind("closed",function(){document.title=t,window.history.pushState({},document.title,window.location.href.split("#")[0])}),$("#loading").hide()},error:apiError})},error:apiError})}function initMap(){$.getJSON("/js/markers.json",function(e){for(var t={center:new google.maps.LatLng(35,10),zoom:2,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,draggable:!1,styles:[{featureType:"all",elementType:"labels",stylers:[{color:"#ff0000"},{visibility:"off"}]},{featureType:"all",elementType:"labels.text",stylers:[{color:"#c4c4c4"},{visibility:"off"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#c4c4c4"},{visibility:"off"}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#c4c4c4"}]},{featureType:"administrative.country",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#c4c4c4"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{color:"#ff0000"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"},{color:"#c4c4c4"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#c4c4c4"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45},{color:"#c4c4c4"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"},{color:"#c4c4c4"}]},{featureType:"water",elementType:"all",stylers:[{color:"#ffffff"},{visibility:"on"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text",stylers:[{color:"#c4c4c4"}]}]},o=new google.maps.Map(document.getElementById("map"),t),i=new google.maps.InfoWindow,a=0;a<e.length;a++){var r=new google.maps.Marker({position:{lat:e[a].coords.lat,lng:e[a].coords.lng},map:o});google.maps.event.addListener(r,"click",function(t,a){return function(){i.setContent("<div class='infoWindowText'><h5>"+e[a].country+"</h5><br>"+e[a].address+"<br>Phone: "+e[a].phone+"<br>Email: <a href='mailto:"+e[a].email+"'>"+e[a].email+"</a></div>"),i.open(o,t)}}(r,a))}mapReady=!0,teamReady&&$("#loading").fadeOut()})}for(var cookies={},cookiesTEMP=document.cookie.split(";"),i=0;i<cookiesTEMP.length;i++){var cookieTHIS=cookiesTEMP[i].split("=");cookies[cookieTHIS[0]]=cookieTHIS[1]}var config={user_id:"lightfarm",client_id:cookies.CLIENT_ID?cookies.CLIENT_ID:"8hRTUTjbwsJrLqGZ0kgxT48GBmkwwM5g"};loadTmpl("popup");var pauseHash=!1;$(window).on("hashchange",function(){pauseHash?pauseHash=!1:"#view="!=window.location.hash.substr(0,6)||isNaN(window.location.hash.substr(6))?$("#portfolioPopupModal").is(":visible")&&$("#portfolioPopupModal").popup("hide"):showItem(window.location.hash.substr(6))}).trigger("hashchange");var mapReady=!1;$.fn.popup=function(e,t){var o={backdrop:!0,click:!0,keyboard:!0},i=$.extend({},o,t);return"toggle"==e?(this.popup(this.is(":visible")?"hide":"show",t),this):(this.data({popupSettings:i}),this.find(".popup-backdrop").filter(function(){return!$(this).data("popupInit")}).data({popupInit:1}).click(function(){$(this).parent().data("popupSettings").click&&$(this).parent().popup("hide")}),"hide"==e?($("body").css("overflow","auto"),this.trigger("close"),this.find(".popup-container").animate({top:0-1.5*this.find(".popup-container").height()},500,function(){$(this).trigger("closed")}),this.find(".popup-backdrop").fadeOut(500,function(){$(this).parent().hide()})):"show"!=e&&e||($("body").css("overflow","hidden"),this.find(".popup-backdrop,.popup-container").hide(),this.show(),this.find(".popup-container").css({top:0-1.5*this.find(".popup-container").height()}).show().animate({top:"50%"},500,function(){$(this).trigger("opened")}),this.data("popupSettings").backdrop?this.find(".popup-backdrop").fadeIn(500):this.find(".popup-backdrop").css({opacity:0}).show()),this)},$(document).keyup(function(e){27==e.keyCode&&$(".popup:visible").length&&$(".popup:visible").filter(function(){return $(this).data("popupSettings").keyboard}).popup("hide")});var portfolio={categories:[],categoriesCount:{},mixer:null,user:config.user_id,page:0,maxFilters:4,grid:3,load:function(){if("mixitup-loadmore"==$(this).attr("id")){if($(this).find(".bouncer").is(":visible"))return!1;$(this).find("span").hide(),$(this).find(".bouncer").show()}portfolio.page++,$.ajax({url:"https://www.behance.net/v2/users/"+portfolio.user+"/projects",data:{client_id:config.client_id,per_page:12,page:portfolio.page},dataType:"jsonp",success:function(e){for(var t=0;t<e.projects.length;t++){for(var o=0;o<e.projects[t].fields.length;o++){var i=e.projects[t].fields[o];-1==portfolio.categories.indexOf(i)&&portfolio.categories.push(i),portfolio.categoriesCount[i]=portfolio.categoriesCount[i]?Number(portfolio.categoriesCount[i])+1:1}$el=$("<div />");for(var a=0;a<e.projects[t].fields.length;a++)$el.addClass("tag-"+e.projects[t].fields[a].replace(/ /g,"").replace(/[^\w\s]/gi,"").toLowerCase());$el.addClass("portfolio-item").addClass("col-md-"+portfolio.grid).data("projectData",e.projects[t]).append("<img />").find("img:last").addClass("portfolio-image").attr("src",e.projects[t].covers[404]).attr("alt",e.projects[t].name).parent().append("<div />").find("div:last").addClass("portfolio-title").text(e.projects[t].name).parent().click(showItem),$("#mixitup-container .row").append($el)}$("#mixitup-container .portfolio-item:not(.faded-done)").hide().addClass("faded-done").fadeIn(500);var r=Object.keys(portfolio.categoriesCount).sort(function(e,t){return portfolio.categoriesCount[e]-portfolio.categoriesCount[t]});r.reverse(),$("#mixitup-container .filters .btn:not(:eq(0))").remove();for(var l=0;l<r.length;l++)$el=$("<button />"),$el.addClass("btn").attr("type","button").attr("data-filter",".tag-"+r[l].replace(/ /g,"").replace(/[^\w\s]/gi,"").toLowerCase()).text(r[l]),l>portfolio.maxFilters-1&&$el.addClass("hide"),$("#mixitup-container .filters").append($el),l==r.length-1&&r.length>portfolio.maxFilters&&($("#mixitup-container .filters .btn.showmore, #mixitup-container .filters #mixitup-showless").remove(),$("#mixitup-container .filters").append("<button class='btn showmore btn-invert' type='button'>Show more...</button>"),$("#mixitup-container .filters").append("<a id='mixitup-showless' class='btn btn-invert'>Show less</a>"));$("#mixitup-loadmore").remove(),12==e.projects.length&&($el=$("<button />"),$el.addClass("btn").attr("id","mixitup-loadmore").click(portfolio.load).append("<span />").find("span:last").text("Load more...").parent().append("<div />").find("div:last").addClass("bouncer").hide().append("<div />").find("div:last").addClass("bounce1").parent().append("<div />").find("div:last").addClass("bounce2").parent().append("<div />").find("div:last").addClass("bounce3"),$("#mixitup-container").append($el)),$("#mixitup-container .filters .btn.showmore").click(function(){return $("#mixitup-container .filters").addClass("show"),!1}),$("#mixitup-showless").click(function(){return $("#mixitup-container .filters").removeClass("show"),!1}),portfolio.mixer&&portfolio.mixer.destroy(),portfolio.mixer=mixitup("#mixitup-container",{selectors:{target:".portfolio-item"},animation:{duration:300}}),$("#loading").fadeOut()},error:apiError})}};if("homepage"==$("body").attr("id")&&portfolio.load(),"profile"==$("body").attr("id")){var profileID=window.location.pathname.split("/")[2];portfolio.maxFilters=2,portfolio.grid=4,portfolio.user=profileID,$.ajax({url:"https://www.behance.net/v2/users/"+profileID,data:{client_id:config.client_id},dataType:"jsonp",success:function(e){document.title=e.user.display_name+" | "+document.title;var t=$("#profileData").html(),o=Template7.compile(t)(e.user);$("#profile-sidebar").html(o),$("#profile-sidebar > *").hide().fadeIn(500),portfolio.load()},error:apiError})}var teamReady=!1;"about"==$("body").attr("id")&&$.getJSON("/js/team.json",function(e){for(var t=$("#teamRows").html(),o=Template7.compile(t),i=[],a=0;a<e.length;a++){var r=e[a];r.lineBr=(a+1)%4==0,i.push(r)}var l=o({team:i});$("#teamRows").after(l),teamReady=!0,mapReady&&$("#loading").fadeOut()});